<!DOCTYPE html>
<html lang="en"><head>
<script src="2025-04-25-vlc-talk_files/libs/clipboard/clipboard.min.js"></script>
<script src="2025-04-25-vlc-talk_files/libs/quarto-html/tabby.min.js"></script>
<script src="2025-04-25-vlc-talk_files/libs/quarto-html/popper.min.js"></script>
<script src="2025-04-25-vlc-talk_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="2025-04-25-vlc-talk_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="2025-04-25-vlc-talk_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="2025-04-25-vlc-talk_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.42">

  <meta name="author" content="Matt Graham">
  <title>Recipes for developing robust and reusable research software</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="2025-04-25-vlc-talk_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="2025-04-25-vlc-talk_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="2025-04-25-vlc-talk_files/libs/revealjs/dist/theme/quarto-45dc37aacd0d0e8854d94325ac9e54e7.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="asciinema-player.css">
  <link href="2025-04-25-vlc-talk_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="2025-04-25-vlc-talk_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="2025-04-25-vlc-talk_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="2025-04-25-vlc-talk_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="2025-04-25-vlc-talk_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="2025-04-25-vlc-talk_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <meta name="mermaid-theme" content="neutral">
  <script src="2025-04-25-vlc-talk_files/libs/quarto-diagram/mermaid.min.js"></script>
  <script src="2025-04-25-vlc-talk_files/libs/quarto-diagram/mermaid-init.js"></script>
  <link href="2025-04-25-vlc-talk_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="center">
    <h1 class="title">Recipes for developing robust and reusable research software</h1>
      <p class="subtitle">üõ†Ô∏èüì¶üß™üëÄüìö‚è±Ô∏èüë•ü§ù</p>
          <p class="author">Matt Graham</p>
        <p class="institute" style="color: #999;">UCL Centre for Advanced Research Computing</p>
      </section>
<section id="introduction" class="slide level2">
<h2>üí° Introduction</h2>
<aside class="notes">
<p>The increasing use of computational modelling and data-driven methods in all areas of research means a large proportion of researchers will at some point need to write code.</p>
<p>In this context, the development of robust and reusable software is essential for accelerating scientific discovery and ensuring reproducibility.</p>
<p>This talk will summarize some of the lessons I‚Äôve learnt about developing research software and in particular ensuring it is reliable and can be easily used and built on by others.</p>
<p>I will do this through the lens of my journey from a PhD student in computational statistics and machine learning to my current role as a research software engineer, using examples of software packages and projects I have been involved in this time.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<p>Computational methods increasingly used in <strong>all areas of research</strong> - most researchers now <strong>write code</strong>:</p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong><em>UK Research Software Survey 2014</em>‚Äã <a href="https://doi.org/10.5281/zenodo.1183562">doi:10.5281/zenodo.1183562</a></strong></p>
</div>
<div class="callout-content">
<ul>
<li class="fragment">92% of academics use research software,</li>
<li class="fragment">56% develop their own,</li>
<li class="fragment">21% have no training in software development.</li>
</ul>
</div>
</div>
</div>
<div class="fragment">
<p>Developing <strong>robust</strong> &amp; <strong>reusable</strong> software vital for <strong>accelerating scientific discovery</strong> and ensuring <strong>reproducibility</strong>.</p>
</div>
<div class="fragment">
<p><em>This talk</em>: summary of lessons I‚Äôve learnt about developing <strong>reliable</strong> research software that is <strong>easily usable</strong> by others.</p>
</div>
</section>
<section id="rses-a-brief-history" class="slide level2">
<h2>üï∞Ô∏è RSEs: a brief history</h2>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">timeline
    Mar 2012: RSE term coined at Collaborations Workshop
    Sep 2012: 'The RSE' Digital Research conference paper
    Oct 2012: First generalist RSE group set up at UCL
    Sep 2013: First workshop for RSEs (56 RSEs)
    Sep 2014: RSE Association first AGM
    Sep 2015: Southampton Research Software Group founded
    Sep 2016: First RSEcon (202 RSEs, 14 countries)
    Mar 2019: Society of RSE founded from RSE Association
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<div class="incremental-stack r-stack top-align">
<div class="fragment fade-out" data-fragment-index="1">
The

term

<em>research software engineer</em>

(RSE)

was

first

proposed

in

a

meeting

at

the

<em>Software Sustainability Institute</em>

(SSI)

Collaborations

Workshop

in

March

2012.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="1">
The

meeting

had

been

convened

to

discuss

the

long-standing

issue

of

a

lack

of

a

dedicated

career

path

for

software

developers

in

academia.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="2">
RSEs

were

envisaged

as

individuals

combining

‚Äòa professional attitude to the exercise of software engineering with a deep understanding of research topics‚Äô
.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="3">
Momentum

from

this

meeting

was

maintained,

with

a

paper

on

RSE

presented

at

Digital

Research

conference

later

that

year

and

a

campaign

run

by

SSI

promoting

RSE

career

paths.
</div>
<!--_Local note_: Researchers from Southampton such as Dirk Gorissen and Simon Hetterick played a leading role in these early stages!-->
<div class="fragment  fade-in-then-out" data-fragment-index="5">
A

big

step

came

with

the

establishment

of

dedicated

RSE

groups,

with

the

first

set

up

at

UCL,

and

the

Southampton

Research

Software

Group

another

early

example.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="6">
A

parallel

development

was

the

establishment

of

a

UK

RSE

association

at

the

first

RSE

workshop

in

September

2013,

with

their

now

a

international

community

of

similar

organizations.
</div>
<!--A dedicated annual conference for RSEs was started in September 2016, and has been running yearly since then with hundred attendees from all over the world.-->
</div>

<aside><div>
<p>Hetterick (2016). <em>A not-so-brief history of Research Software Engineers</em>. <a href="https://doi.org/10.5281/zenodo.10076740">doi:10.5281/zenodo.10076740</a></p>
</div></aside></section>


<section>
<section id="recipes" class="title-slide slide level1 center">
<h1>üßë‚Äçüç≥ Recipes</h1>
<div class="compressed-list no-bullet">
<ul>
<li>üõ†Ô∏è Take advantage of tools</li>
<li>üì¶ Package everything</li>
<li>üß™ Test early, test often</li>
<li>üëÄ Prioritize code readability</li>
<li>üìö Invest time in writing documentation</li>
<li>‚è±Ô∏è Beware premature optimization</li>
<li>üë• Learn from others</li>
<li>ü§ù Be a good software citizen</li>
</ul>
</div>
</section>
<section id="take-advantage-of-tools" class="slide level2">
<h2>üõ†Ô∏è Take advantage of tools</h2>
<p>There are a multitude of tools available for assisting in the process of developing software, for example:</p>
<div class="compressed-list">
<ul>
<li class="fragment"><em>Linters</em> - statically analyse code to catch errors and ‚Äòsmells‚Äô.</li>
<li class="fragment"><em>Formatters</em> - enforce code style conventions.</li>
<li class="fragment"><em>Type checkers</em> - check consistency of type information.</li>
<li class="fragment"><em>Environment management</em> - isolate project dependencies. <!--
- _Testing_ - frameworks for writing and running suites of tests.
- _Documentation systems_ - write and build documentation.
--></li>
</ul>
</div>
<div class="fragment">
<p>Used correctly, such tools can significantly streamline the development process particularly in collaborative projects.</p>
</div>
</section>
<section id="case-study-python-tooling" class="slide level2">
<h2>üìë Case study: python-tooling</h2>
<div class="incremental-stack r-stack top-align">
<div class="fragment fade-out" data-fragment-index="1">
Project

started

at

UCL

ARC

to

help

researchers

in

choosing

and

setting

up

tooling

to

use

in

Python

research

software

projects.
</div>
<div class="fragment fade-in" data-fragment-index="1">
Key

component

is

a

website

giving

recommendations

on

tools

and

services

that

are

useful

when

building

a

Python

package.
</div>
</div>
<div class="fragment">
<iframe width="100%" height="480" src="https://github-pages.arc.ucl.ac.uk/python-tooling/" title="python-tooling site"></iframe>
</div>
</section>
<section id="case-study-python-tooling-1" class="slide level2 nostretch">
<h2>üìë Case study: python-tooling</h2>
<p>As well as recommendations website the <code>python-tooling</code> project also provides a üç™ cookiecutter template.</p>
<div id="python-tooling-demo">

</div>
<script src="asciinema-player.min.js"></script>
<script>
AsciinemaPlayer.create('images/python-tooling.cast', document.getElementById('python-tooling-demo'), {
  speed: 1,
  cols: 115,
  height: 16,
  autoPlay: true,
  preload: true
});
</script>
<!--
. . .

_Caution_: tools can be useful but don't let them get in the way!

-->
</section>
<section id="package-everything" class="slide level2">
<h2>üì¶ Package everything</h2>
<p>A common abstraction across many languages are <strong>packages</strong>:</p>
<ul>
<li class="fragment">‚ôªÔ∏è Packages are units of <strong>distributable</strong> and <strong>resuable</strong> code.</li>
<li class="fragment">üß© Typically package will have <strong>standard structure</strong>.</li>
<li class="fragment">‚ÑπÔ∏è Include <strong>code</strong> but also <strong>metadata</strong> describing package.</li>
<li class="fragment">üèóÔ∏è <strong>Package managers</strong> allow easy installing of packages. <!--
- üåê __Package repositories__ make it easy to share packages.
--></li>
<li class="fragment">‚ú® Typically <strong>minimal overhead</strong> to creating a package.</li>
</ul>
</section>
<section id="case-study-pompy" class="slide level2">
<h2>üìë Case study: pompy</h2>
<aside class="notes">
<p>Python package developed as part of my Masters dissertation on insect navigation using olfactory landmarks.</p>
<!-- Part of project was in analysing navigational information available from odour plumes. -->
<p>Required simulating time varying odour concentration fields for which I implemented an existing model from description in paper.</p>
<p>While there is a lot of things I would do differently, a key positive was that I published the code as a reusable package which is available on the Python Packaging Index.</p>
<p>The package has far outlived the other project outputs and I continue to occasionally get emails or issues from the occasional user!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="incremental-stack r-stack top-align">
<div class="fragment fade-out" data-fragment-index="1">
Python

package

developed

during

MRes

project

on

insect

navigation

using

olfactory

landmarks.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="1">
Implements

an

existing

model

which

simulates

time

varying

odour

concentration

fields.
</div>
<div class="fragment fade-in" data-fragment-index="2">
Code

was

published

as

a

reusable

package

on

PyPI

and

still

gets

occasional

users!
</div>
</div>
<iframe width="100%" height="500" src="https://pompy-docs.readthedocs.io/en/latest/?badge=latest" title="pompy docs"></iframe>
</section>
<section id="test-early-test-often" class="slide level2">
<h2>üß™ Test early, test often</h2>
<!--
- üêõ Virtually __all software contains bugs__.
-->
<ul>
<li class="fragment">‚õìÔ∏è‚Äçüí• Irrespective of skill and experience of a developer <strong>they will break things</strong>.</li>
<li class="fragment">üö¶ Having <strong>automated</strong> tests to check correctness is best safeguard against this.</li>
<li class="fragment">‚úçÔ∏è Writing tests from <strong>outset of development process</strong> controls complexity and informs design.</li>
<li class="fragment">‚òÇÔ∏è Good <em>test coverage</em> is <strong>necessary</strong> but <strong>not sufficient</strong>.</li>
</ul>
</section>
<section id="case-study-mici" class="slide level2">
<h2>üìë Case study: Mici</h2>
<aside class="notes">
<p>Mici is a Python package implementing a class of algorithms for performing approximate Bayesian inference.</p>
<p>I started developing it during my PhD both as way to learn about the implementations of existing methods but also for doing experiments with some of new algorithms I was developing as part of my PhD and later postdoctoral research projects.</p>
<p>Probably in common with a lot of PhD student developed code it did not initially have any automated tests. While I was vaguely aware of the concept of unit tests when I first started developing I hadn‚Äôt had any experience writing test suites and did all of my testing manually. Unsurprisingly this led to a lot of unnoticed bugs slipping through which is clear from the high percentage of early commit message mentioning fix or bug!</p>
<p>As the package became more and more complex this became a major barrier to development, and in 2019 I bit the bullet and started adding tests. Initially I was still running tests only locally but in 2020 I made my first ventures into using continuous integration using GitHub Actions, now something I use on a daily basis but at the time something which seemed like a venture into the unknown.</p>
<p>Test coverage has gradually increased and now covers a significant fraction of package code, with lots of bugs caught and fixed along the way.</p>
<!--
While adding tests post-hoc like this is definitely non-ideal it has actually proven useful experience for my current role as we often find the code we first encounter when starting collaborative projects with researchers has few or no tests!
-->
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://raw.githubusercontent.com/matt-graham/mici/main/images/mici-logo-rectangular.svg" class="quarto-figure quarto-figure-center" alt="Mici logo" width="400"></p>
</figure>
</div>
<p><a href="https://pypi.org/project/mici"><img data-src="https://badge.fury.io/py/mici.svg" alt="PyPI version"></a> <a href="https://zenodo.org/badge/latestdoi/52494384"><img data-src="https://zenodo.org/badge/52494384.svg" alt="Zenodo DOI"></a> <img data-src="https://img.shields.io/github/stars/matt-graham/mici.svg?style=flat&amp;label=%E2%98%86%20GitHub%20stars" alt="GitHub stars"> <a href="https://github.com/matt-graham/mici/actions/workflows/tests.yml"><img data-src="https://github.com/matt-graham/mici/actions/workflows/tests.yml/badge.svg" alt="Test status"></a> <a href="https://github.com/matt-graham/mici/actions/workflows/linting.yml"><img data-src="https://github.com/matt-graham/mici/actions/workflows/linting.yml/badge.svg" alt="Linting status"></a> <a href="https://github.com/matt-graham/mici/actions/workflows/docs.yml"><img data-src="https://github.com/matt-graham/mici/actions/workflows/docs.yml/badge.svg" alt="Docs status"></a> <a href="https://codecov.io/gh/matt-graham/mici"><img data-src="https://codecov.io/gh/matt-graham/mici/graph/badge.svg?token=YXC1A7WONK" alt="codecov"></a></p>
<p><strong>Mici</strong> is a Python package providing implementations of <em>Markov chain Monte Carlo</em> (MCMC) methods for approximate inference in probabilistic models.</p>
<div class="compressed-list">
<ul>
<li class="fragment">Started development in 2016 during PhD üë®‚Äçüéì.</li>
<li class="fragment">I didn‚Äôt add first tests till 2019 üò±!</li>
<li class="fragment">Unsurprisingly initial tests caught a lot of bugs ü™≤.</li>
<li class="fragment">Tests significantly increased development velocity üöÄ.</li>
</ul>
</div>
</section>
<section id="prioritize-code-readability" class="slide level2">
<h2>üëÄ Prioritize code readability</h2>
<aside class="notes">
<p>Most of the time spent in developing software is typically not in <strong>writing</strong> or <strong>running</strong> code, but instead in <strong>reading</strong> code.</p>
<p>This may be reading your own (or a colleagues) code to understand how to add a new feature or diagnose and fix a bug, or reading externally developed code to understand how to use and interface with it.</p>
<p>From this viewpoint, we should not therefore optimizing code for how easy it to write or even how quickly it will run but how easy it is to read and understand.</p>
<p>Making our code readable and easy to understand will typically make it much easier to maintain.</p>
<!--
Saving on keystrokes by using abbreviated variable and function names is __false economy__! Similarly cryptic one-liners are best kept for code golf rather than code you are intending to use in practice. 
-->
<p>Code which is uses descriptive names is <strong>self-documenting</strong> often precluding the need for explanatory comments.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<ul>
<li class="fragment">Majority of software development time is not spent <strong>writing</strong> or <strong>running</strong> code but instead <strong>reading</strong> code.</li>
<li class="fragment">We should <strong>optimize code for how easy it is to read</strong> not how quick it is to write or run.</li>
<li class="fragment">Code that is easy to read and understand will also be inevitably be <strong>more maintainable</strong>.</li>
<li class="fragment">Using descriptive variable and function names makes code <strong>self-documenting</strong>.</li>
</ul>
</section>
<section id="case-study-rmcmc" class="slide level2">
<h2>üìë Case study: rmcmc</h2>
<div class="incremental-stack r-stack top-align">
<div class="fragment fade-out" data-fragment-index="1">
R

package

developed

as

part

of

a

collaborative

project

with

a

researcher

Sam

Livingstone

in

UCL

Statistical

Science.

<!-- This was my first experience developing an R package. -->
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="1">
Built

on

a

lot

of

lessons

I

learnt

in

developing

Mici

but

also

experienced

gained

since

becoming

an

RSE.
</div>
<div class="fragment fade-in" data-fragment-index="2">
Code

written

in

quite

a

verbose

style

which

is

somewhat

atypical

of

R

but

in

my

opinion

helps

readability!
</div>
</div>
<div style="margin-top: 20px;">
<iframe width="100%" height="400" src="http://github-pages.ucl.ac.uk/rmcmc/" title="rmcmc documentation"></iframe>
</div>
</section>
<section id="case-study-rmcmc-1" class="slide level2">
<h2>üìë Case study: rmcmc</h2>
<p>Typical implementation of main loop in key <code>sample_chain</code> function might be something like the following:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_len</span>(n)) {</span>
<span id="cb1-2"><a href=""></a>  s <span class="ot">&lt;-</span> <span class="fu">sample_mh</span>(s<span class="sc">$</span>state, tgt, prop)</span>
<span id="cb1-3"><a href=""></a>  <span class="cf">for</span> (a <span class="cf">in</span> adpts) a<span class="sc">$</span><span class="fu">update</span>(prop, i, s)</span>
<span id="cb1-4"><a href=""></a>  <span class="cf">if</span> (record) {</span>
<span id="cb1-5"><a href=""></a>    traces[i, ] <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">trace_f</span>(s<span class="sc">$</span>state))</span>
<span id="cb1-6"><a href=""></a>    stats[i, ] <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">c</span>(s<span class="sc">$</span>stats, <span class="fu">lapply</span>(adpts, <span class="cf">function</span>(a) a<span class="sc">$</span><span class="fu">state</span>())))</span>
<span id="cb1-7"><a href=""></a>  }</span>
<span id="cb1-8"><a href=""></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(pb) <span class="sc">&amp;&amp;</span> (i <span class="sc">%%</span> t <span class="sc">==</span> <span class="dv">0</span>)) pb<span class="sc">$</span><span class="fu">tick</span>(t)</span>
<span id="cb1-9"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="case-study-rmcmc-2" class="slide level2">
<h2>üìë Case study: rmcmc</h2>
<p>Actual implementation uses longer more descriptive names and avoids abbreviations at expense of less compact code:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a><span class="cf">for</span> (chain_iteration <span class="cf">in</span> <span class="fu">seq_len</span>(n_iteration)) {</span>
<span id="cb2-2"><a href=""></a>  state_and_statistics <span class="ot">&lt;-</span> <span class="fu">sample_metropolis_hastings</span>(</span>
<span id="cb2-3"><a href=""></a>    state, target_distribution, proposal</span>
<span id="cb2-4"><a href=""></a>  )</span>
<span id="cb2-5"><a href=""></a>  <span class="fu">update_adapters</span>(adapters, proposal, chain_iteration, state_and_statistics)</span>
<span id="cb2-6"><a href=""></a>  state <span class="ot">&lt;-</span> state_and_statistics<span class="sc">$</span>state</span>
<span id="cb2-7"><a href=""></a>  <span class="cf">if</span> (record_traces_and_statistics) {</span>
<span id="cb2-8"><a href=""></a>    traces[chain_iteration, ] <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">trace_function</span>(state))</span>
<span id="cb2-9"><a href=""></a>    adapter_states <span class="ot">&lt;-</span> <span class="fu">lapply</span>(adapters, <span class="cf">function</span>(a) a<span class="sc">$</span><span class="fu">state</span>())</span>
<span id="cb2-10"><a href=""></a>    statistics[chain_iteration, ] <span class="ot">&lt;-</span> <span class="fu">unlist</span>(</span>
<span id="cb2-11"><a href=""></a>      <span class="fu">c</span>(state_and_statistics<span class="sc">$</span>statistics, adapter_states)</span>
<span id="cb2-12"><a href=""></a>    )</span>
<span id="cb2-13"><a href=""></a>  }</span>
<span id="cb2-14"><a href=""></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(progress_bar) <span class="sc">&amp;&amp;</span> (chain_iteration <span class="sc">%%</span> tick_amount <span class="sc">==</span> <span class="dv">0</span>)) {</span>
<span id="cb2-15"><a href=""></a>    progress_bar<span class="sc">$</span><span class="fu">tick</span>(tick_amount)</span>
<span id="cb2-16"><a href=""></a>  }</span>
<span id="cb2-17"><a href=""></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="invest-time-in-writing-docs" class="slide level2">
<h2>üìö Invest time in writing docs</h2>
<ul>
<li class="fragment">The first point of call for a software user will usually be the <strong>project documentation</strong>.</li>
<li class="fragment">Better <strong>coverage</strong> and <strong>quality</strong> of documentation <span class="math inline">\(\Rightarrow\)</span> <strong>more users</strong> and <strong>fewer user queries</strong> to deal with.</li>
<li class="fragment">Tools such as <em>Sphinx</em>, <em>MkDocs</em> and <em>pkgdown</em> make it easy to <strong>automatically</strong> generate and deploy documentation sites.</li>
</ul>
</section>
<section id="invest-time-in-writing-docs-1" class="slide level2">
<h2>üìö Invest time in writing docs</h2>
<p>Some basic guidelines:</p>
<div class="compressed-list">
<ul>
<li class="fragment">üßê Every public function should document what it <strong>does</strong>, what <strong>arguments</strong> it takes, what it <strong>returns</strong> &amp; any <strong>side effects</strong>.</li>
<li class="fragment">‚ñ∂Ô∏è Provide <strong>example usages</strong> - these can often be included as additional tests.</li>
<li class="fragment">üìö In addition to reference documentation include longer form <strong>tutorials</strong> and <strong>how-to-guides</strong>.</li>
<li class="fragment">üßë‚Äçüíª As well as user facing documentation, give guidance to potential <strong>contributors</strong>.</li>
</ul>
</div>
<div class="fragment">
<!--
[Di√°taxis](https://diataxis.fr/) gives a more systematic approach to authoring documentation.
-->
</div>
</section>
<section id="case-study-s2fft" class="slide level2">
<h2>üìë Case study: S2FFT</h2>
<div class="incremental-stack r-stack top-align">
<div class="fragment fade-out" data-fragment-index="1">
S2FFT

is

a

Python

package

for

computing

Fourier

transforms

on

the

sphere

and

rotation

group

using

JAX

or

PyTorch.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="1">
Leverages

automatic

differentiation

to

provide

differentiable

transforms

and

allows

GPU

acceleration.
</div>
<!--
Algorithms were developed by Jason McEwen and Matt Price (Price & McEwen, 2024; [doi:10.1016/j.jcp.2024.113109](https://doi.org/10.1016/j.jcp.2024.113109)).

Initial package development was supported by ARC team via an internal Open Source Software Sustainability call in 2022.

Subsequently we successfully applied for a ARCHER2 GPU eCSE funding with a two year project starting October 2024.
-->
<div class="fragment fade-in" data-fragment-index="3">
Package

has

comprehensive

API

reference

and

tutorial

documentation

built

using

Sphinx.
</div>
</div>
<div style="margin-top: 20px;">
<iframe width="100%" height="500" src="https://astro-informatics.github.io/s2fft/" title="s2fft documentation"></iframe>
</div>

<aside><div>

</div></aside></section>
<section id="beware-premature-optimization" class="slide level2">
<h2>‚è±Ô∏è Beware premature optimization</h2>
<p>An easy trap to fall in to is to spend a lot of time optimizing the performance of code that you <em>think</em> is going to run slowly.</p>
<div class="fragment">
<p>This is inadvisable for several reasons:</p>
<ul>
<li class="fragment">Linking to earlier point, often code optimized for performance will be <strong>less readable</strong>.</li>
<li class="fragment">More crucially, we are often very bad at intuiting where <strong>performance bottlenecks</strong> actually are.</li>
</ul>
</div>
<div class="fragment">
<p>Ideally any code performance optimization should be <em>data-driven</em> by <strong>profiling</strong> realistic runs of code.</p>
</div>
</section>
<section id="case-study-tlomodel" class="slide level2">
<h2>üìë Case study: TLOmodel</h2>
<div class="incremental-stack r-stack top-align">
<div class="fragment fade-out" data-fragment-index="1">
TLOmodel

is

a

Python

package

implementing

epidemiological

modelling

framework

of

the

<em>Thanzi la Onse</em>

project.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="1">
Software

development

lead

by

team

at

UCL

ARC

with

contributions

from

modelling

experts

in

wider

collaboration.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="2">
Researchers

run

simulations

to

examine

the

effect

of

resource

allocation

and

clinical

practice.
</div>
<div class="fragment fade-in" data-fragment-index="3">
Model

run

time

and

memory

usage

have

grown

significantly

as

it

has

become

more

complex.
</div>
</div>
<iframe width="100%" height="500" src="https://www.tlomodel.org/" title="TLOmodel docs"></iframe>
</section>
<section id="case-study-tlomodel-1" class="slide level2">
<h2>üìë Case study: TLOmodel</h2>
<p>Major focus of my and colleagues work has been in profiling model runs and using this to identify and resolve bottlenecks.</p>
<iframe width="100%" height="500" src="https://github-pages.ucl.ac.uk/TLOmodel-profiling/index.html" title="TLOmodel profiling data"></iframe>
</section>
<section id="learn-from-others" class="slide level2">
<h2>üë• Learn from others</h2>
<p>The best way to improve your development skills is by <strong>observing</strong> and <strong>learning</strong> from others:</p>
<ul>
<li class="fragment">üìñ <strong>Read the code</strong> of software you use.</li>
<li class="fragment">üëÄ Give and receive <strong>code reviews</strong>.</li>
<li class="fragment">üë• Take part in <strong>pair programming</strong> sessions.</li>
<li class="fragment">üë®‚Äçüéì Enroll in <strong>training</strong> opportunities.</li>
</ul>
</section>
<section id="case-study-particleda.jl" class="slide level2">
<h2>üìë Case study: ParticleDA.jl</h2>
<div class="incremental-stack r-stack top-align">
<div class="fragment fade-out" data-fragment-index="1">
Julia

package

for

data

assimilation

using

particle

filters.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="1">
Development

started

in

2020

as

part

of

a

project

on

real-time

data

assimilation

for

digital

twins.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="2">
I

started

contributing

to

projecting

in

2022

after

joining

ARC

-

first

experience

developing

in

Julia.
</div>
<div class="fragment fade-in" data-fragment-index="3">
Been

a

great

opportunity

for

me

to

learn

from

colleagues

and

a

project

I

am

still

involved

in.
</div>
</div>
<p><br></p>
<iframe width="100%" height="400" src="https://team-raddish.github.io/ParticleDA.jl/dev/" title="ParticleDA documentation"></iframe>
<aside class="notes">
<p>ParticleDA is a Julia package implementing algorithms for data assimilation, that is combining information from observational data with a probabilistic numerical model of a process to infer how the process evolves over time.</p>
<p>It was started as part of a collaborative project between the Alan Turing Insitute and UCL, with two of my colleagues from UCL ARC, Tuomas Koskela and Mose Giordano leading the initial development.</p>
<p>After I joined ARC, as I had previously worked on data assimilation methods as part of my postdoctoral research I asked to get involved in the project.</p>
<p>This was my first experience developing in Julia and also in writing algorithms using MPI.</p>
<p>Fortunately my colleagues Mose and Tuomas were respectively Julia and MPI experts.</p>
<p>Reading the existing code base in itself was a great learning exercise, particularly as I was already familiar with the underlying algorithms</p>
<p>I also was fortunate to receive a lot of detailed suggestions and advice as part of code reviews from my colleagues on contributions I made which taught me a lot, both about the technologies being used but also around tools and approaches for collaborative development.</p>
<p>We continue to develop the package and it has been used in several research projects subsequently.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="be-a-good-software-citizen" class="slide level2">
<h2>ü§ù Be a good software citizen</h2>
<p>ü´¥ Making open-source contributions is both a great <strong>learning opportunity</strong> and a way to help projects <strong>remain sustainable</strong>.</p>
<div class="fragment">
<p>üìú A lot of projects will have <strong>contribution guidelines</strong>.</p>
</div>
<div class="fragment">
<p>üôã <strong>Raising issues</strong> for bugs you encounter is a great first step.</p>
</div>
<div class="fragment">
<p>üè∑Ô∏è If wanting to contribute code, look for <code>good-first-issue</code>s .</p>
</div>
<div class="fragment">
<p>üìÖ Structured programmes such as <a href="https://summerofcode.withgoogle.com/">Google Summer of Code</a> &amp; <a href="https://www.esoc.dev/">European Summer of Code</a> are great ways to gain experience.</p>
</div>
</section>
<section id="case-study-theano" class="slide level2">
<h2>üìë Case study: Theano</h2>
<div class="columns">
<div class="column">
<p><img data-src="https://raw.githubusercontent.com/Theano/Theano/refs/heads/master/doc/images/theano_logo_allblue_paths.svg"></p>
</div><div class="column">
<p><img data-src="https://raw.githubusercontent.com/pymc-devs/pytensor/refs/heads/main/doc/images/PyTensor_RGB.svg"></p>
</div></div>
<div class="incremental-stack r-stack top-align">
<div class="fragment fade-out" data-fragment-index="1">
<em>Theano</em>

was

an

early

open-source

Python

package

allowing

automatic

differentiation

of

mathematical

operations

and

deploying

them

to

GPUs.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="1">
It

was

a

important

stepping

stone

and

inspiration

for

current

deep

learning

packages

like

<em>PyTorch</em>
,

<em>TensorFlow</em>

and

<em>JAX</em>
.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="2">
<em>PyMC</em>

project

built

on

top

of

it

and

later

forked

under

name

<em>PyTensor</em>

which

continues

to

be

used

and

developed

today.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="3">
During

PhD

after

using

Theano

in

several

projects

I

began

contributing

to

project.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="4">
This

was

a

fantastic

learning

experience

and

a

key

part

of

my

journey

towards

becoming

a

RSE

üë£.
</div>
<div class="fragment  fade-in-then-out" data-fragment-index="5">
My

contributions

still

live

on

in

PyTensor

üéâ!
</div>
<div class="fragment fade-in" data-fragment-index="6">
Core

developers

of

Theano

wrote

a

short

software

paper

which

they

included

all

contributors

on

-

my

most

cited

paper

üìä.
</div>
</div>
</section>
<section id="takeaways" class="slide level2">
<h2>‚úÖ Takeaways</h2>
<ul>
<li class="fragment">Research software engineering is a worth considering as an alternative to more typical academic career paths.</li>
<li class="fragment">Even if you don‚Äôt want to become an RSE, RSE groups are a great resource to tap!</li>
<li class="fragment">Things that have helped me most in improving code I write:
<ul>
<li class="fragment">Developing collaboratively, particularly code review.</li>
<li class="fragment">Spending a lot of time reading other people‚Äôs code.</li>
<li class="fragment">Taking yourself out your comfort zone by trying out new languages, tools and methods.</li>
</ul></li>
</ul>
</section>
<section id="thanks-for-listening" class="slide level2 center">
<h2>üôè Thanks for listening</h2>
<p>Any questions?</p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Links</strong></p>
</div>
<div class="callout-content">
<p>üåê <a href="https://matt-graham.github.io" class="uri">https://matt-graham.github.io</a><br>
üèõÔ∏è <a href="https://ucl.ac.uk/arc" class="uri">https://ucl.ac.uk/arc</a></p>
</div>
</div>
</div>

</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="2025-04-25-vlc-talk_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="2025-04-25-vlc-talk_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="2025-04-25-vlc-talk_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="2025-04-25-vlc-talk_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="2025-04-25-vlc-talk_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="2025-04-25-vlc-talk_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="2025-04-25-vlc-talk_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="2025-04-25-vlc-talk_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="2025-04-25-vlc-talk_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="2025-04-25-vlc-talk_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="2025-04-25-vlc-talk_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "none",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': false,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

       // Parallax background image
       parallaxBackgroundImage: 'images/arc-banner-scaled.svg', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.15,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>
